---
title: "Best Practices"
description: "Recommended patterns and practices"
---

## Cleanup Instances

```javascript
const instance = await client.instances.create({
  name: 'my-session',
  description: 'Session'
});

try {
  await instance.run('Task 1');
  await instance.run('Task 2');
} finally {
  await instance.destroy(); // Always cleanup
}
```

## Reuse Templates

```javascript
// Check if template exists before creating
const templates = await client.templates.list();
let template = templates.find(t => t.name === 'python-ml');

if (!template) {
  template = await client.templates.create({
    name: 'python-ml',
    image: 'python:3.11-slim',
    registryType: 'dockerhub'
  });
  await template.waitUntilReady();
}
```

## Error Handling

```javascript
try {
  await instance.run('Build something');
} catch (error) {
  if (error.message.includes('timeout')) {
    console.error('Task timed out');
  } else if (error.message.includes('Instance with name')) {
    console.error('Name already exists');
  } else if (error.message.includes('not found')) {
    console.error('Instance not found');
  }
}
```

## Use Environment Variables

```javascript
// .env
IN10NT_API_KEY=your_key

// code
import 'dotenv/config';
const client = new In10ntClient({
  apiKey: process.env.IN10NT_API_KEY
});
```

<Warning>
  Never commit `.env` to git. Add to `.gitignore`
</Warning>

## Cost Optimization

```javascript
// ❌ Expensive: 3 instances
const inst1 = await client.instances.create({
  name: 'task1',
  description: 'Task 1'
});
await inst1.run('Task 1');
// ... repeat for task2, task3

// ✅ Efficient: 1 instance
const instance = await client.instances.create({
  name: 'session',
  description: 'Multi-task session'
});
await instance.run('Task 1');
await instance.run('Task 2');
await instance.run('Task 3');
```

### Set Timeouts

```javascript
await instance.run('Complex task', {
  timeout: 120000  // 2 min max
});
```

### Monitor Usage

```javascript
const usage = await client.usage.getTokenUsage();
if (usage.monthlyCost > 100) {
  console.warn('Cost threshold exceeded');
}
```

## Naming

```javascript
// ✅ Clear names
'user-api-builder'
'python-ml-v2'
'discord-bot-prod'

// ❌ Vague names
'inst1'
'tmpl'
'test'
```

## Performance

```javascript
// ✅ Parallel (fast)
const [inst1, inst2, inst3] = await Promise.all([
  client.instances.create({ name: 'agent-1', description: 'Agent 1' }),
  client.instances.create({ name: 'agent-2', description: 'Agent 2' }),
  client.instances.create({ name: 'agent-3', description: 'Agent 3' })
]);
```

## Security

- Never log API keys
- Use env vars for secrets
- Rotate keys regularly
- Separate dev/prod keys

